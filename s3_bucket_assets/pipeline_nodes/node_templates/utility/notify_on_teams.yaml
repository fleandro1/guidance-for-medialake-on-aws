spec: v1.0.0
node:
  id: notify_on_teams
  title: Notify on Teams
  description: Posts a notification to Microsoft Teams with information about the processed asset
  version: 1.0.0
  type: utility
  integration:
    config:
      lambda:
        handler: utility/NotifyOnTeamsLambdaDeployment
        runtime: python3.12
        memory_size: 256
        timeout: 60
        environment:
          TEAMS_WEBHOOK_URL: https://jwsite.webhook.office.com/webhookb2/af73926d-c9e4-4f46-922e-8c03e69285ba@e9b2b7ba-b238-42a9-b271-2adfc82da650/IncomingWebhook/cf18e1ed0d4f44a38c2faf26218e90e6/b5779401-ebc6-4604-bc3d-c4a6052a60fb/V2_9Tty1Ql3sQFZ4Vb9630IkOcCQwHyEAsrGlW-Je26I81
        iam_policy:
          statements:
            - effect: Allow
              actions:
                - logs:CreateLogGroup
                - logs:CreateLogStream
                - logs:PutLogEvents
              resources:
                - arn:aws:logs:${AWS::Region}:${AWS::AccountId}:log-group:/aws/lambda/*

actions:
  notify:
    summary: Notify on Teams
    description: Posts a notification to Microsoft Teams with information about the processed asset
    operationId: notifyOnTeams
    parameters:
      - in: body
        name: webhookUrl
        required: false
        default: https://jwsite.webhook.office.com/webhookb2/af73926d-c9e4-4f46-922e-8c03e69285ba@e9b2b7ba-b238-42a9-b271-2adfc82da650/IncomingWebhook/cf18e1ed0d4f44a38c2faf26218e90e6/b5779401-ebc6-4604-bc3d-c4a6052a60fb/V2_9Tty1Ql3sQFZ4Vb9630IkOcCQwHyEAsrGlW-Je26I81
        schema:
          type: string
          description: Microsoft Teams webhook URL (overrides environment variable if provided)
    x-requestMapping: processor/notify_on_teams/notify/
    x-responseMapping: processor/notify_on_teams/notify/
    connections:
      incoming:
        type: [any]
      outgoing:
        type: [any]
